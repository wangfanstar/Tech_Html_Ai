<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDLEæŠ¥æ–‡åœ¨èŠ¯ç‰‡ä¸­çš„ä½ç½®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .chip-diagram {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            margin-bottom: 30px;
        }

        .flow-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 24px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
        }

        .module-box {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            position: relative;
            transition: all 0.3s;
        }

        .module-box:hover {
            background: rgba(255, 215, 0, 0.2);
            border-color: #ffd700;
            transform: translateX(10px);
        }

        .module-name {
            font-size: 18px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .module-desc {
            font-size: 14px;
            line-height: 1.6;
        }

        .arrow-down {
            text-align: center;
            font-size: 36px;
            color: #4facfe;
            margin: 10px 0;
        }

        .highlight-idle {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: 3px solid #ff0080;
            box-shadow: 0 0 20px rgba(255, 0, 128, 0.5);
        }

.code-block {
    background: rgba(0, 0, 0, 0.6);
    padding: 15px;
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    font-size: 13px;
    margin: 15px 0;
    line-height: 1.8;
    border-left: 4px solid #4facfe;
    white-space: pre-wrap;  /* â† æ·»åŠ è¿™è¡Œ */
    word-wrap: break-word;   /* â† é˜²æ­¢é•¿å•è¯æº¢å‡º */
}

        .grid-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .info-card h3 {
            color: #ffd700;
            margin-bottom: 15px;
        }

        .emphasis {
            color: #ff0080;
            font-weight: bold;
        }

        .table-wrapper {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(0, 0, 0, 0.3);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        th {
            background: rgba(255, 215, 0, 0.3);
            font-weight: bold;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .tab-btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }

        .tab-btn:hover {
            background: rgba(255, 215, 0, 0.3);
            border-color: #ffd700;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-color: #ff0080;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .layer-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .layer-l2 { background: rgba(240, 147, 251, 0.8); }
        .layer-l1 { background: rgba(0, 242, 254, 0.8); }
        .layer-phy { background: rgba(255, 87, 108, 0.8); }

        .wave-animation {
            height: 60px;
            display: flex;
            align-items: center;
            gap: 3px;
            margin: 20px 0;
            justify-content: center;
        }

        .wave-bar {
            width: 8px;
            background: linear-gradient(to top, #4facfe, #00f2fe);
            border-radius: 4px;
            animation: wave 1s ease-in-out infinite;
        }

        .wave-bar:nth-child(1) { height: 20px; animation-delay: 0s; }
        .wave-bar:nth-child(2) { height: 35px; animation-delay: 0.1s; }
        .wave-bar:nth-child(3) { height: 50px; animation-delay: 0.2s; }
        .wave-bar:nth-child(4) { height: 35px; animation-delay: 0.3s; }
        .wave-bar:nth-child(5) { height: 20px; animation-delay: 0.4s; }
        .wave-bar:nth-child(6) { height: 35px; animation-delay: 0.5s; }
        .wave-bar:nth-child(7) { height: 50px; animation-delay: 0.6s; }
        .wave-bar:nth-child(8) { height: 35px; animation-delay: 0.7s; }

        @keyframes wave {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }

        @media (max-width: 768px) {
            .grid-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ IDLEæŠ¥æ–‡åœ¨èŠ¯ç‰‡ä¸­çš„å®Œæ•´æµç¨‹</h1>

        <div class="chip-diagram">
            <div class="flow-section">
                <div class="section-title">ğŸ“¤ å‘é€æ–¹å‘ï¼ˆTXï¼‰</div>

                <div class="module-box">
                    <div class="module-name">ä¸Šå±‚åº”ç”¨ <span class="layer-badge layer-l2">L3-L7</span></div>
                    <div class="module-desc">
                        â€¢ TCP/IPåè®®æ ˆ<br>
                        â€¢ ç”¨æˆ·æ•°æ®<br>
                        â€¢ âš ï¸ IDLEåœ¨æ­¤å±‚ä¸å­˜åœ¨
                    </div>
                    <div class="code-block">
                        åº”ç”¨å±‚çœ‹åˆ°çš„ï¼šè¿ç»­çš„æ•°æ®æµ<br>
                        "Hello World..." â†’ [Data Packets]
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box">
                    <div class="module-name">MACå±‚ <span class="layer-badge layer-l2">Layer 2</span></div>
                    <div class="module-desc">
                        â€¢ ä»¥å¤ªç½‘å¸§å°è£…<br>
                        â€¢ æ·»åŠ MACå¤´ã€CRC<br>
                        â€¢ <span class="emphasis">å¤„ç†å¸§é—´éš™ï¼ˆIFGï¼‰</span><br>
                        â€¢ âš ï¸ IDLEè¿˜ä¸å­˜åœ¨
                    </div>
                    <div class="code-block">
                        MACè¾“å‡ºï¼š<br>
                        [Frame 1] ... 96nsç©ºéš™ ... [Frame 2]<br>
                        ç©ºéš™ç”±ä¸‹å±‚ç”¨IDLEå¡«å……
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box highlight-idle">
                    <div class="module-name">ğŸ¯ PCSç¼–ç å±‚ï¼ˆIDLEç”Ÿæˆç‚¹ï¼ï¼‰<span class="layer-badge layer-l1">Layer 1 - PCS</span></div>
                    <div class="module-desc">
                        <strong>â­ IDLEæŠ¥æ–‡åœ¨è¿™é‡Œç”Ÿæˆï¼â­</strong><br>
                        <br>
                        <strong>åŠŸèƒ½ï¼š</strong><br>
                        â€¢ 64B/66Bç¼–ç <br>
                        â€¢ <span class="emphasis">åœ¨æ— æ•°æ®æ—¶ç”ŸæˆIDLEå­—ç¬¦</span><br>
                        â€¢ <span class="emphasis">åœ¨å¸§é—´éš™å¡«å……IDLE</span><br>
                        â€¢ ä¿æŒç‰©ç†å±‚è¿ç»­ä¼ è¾“<br>
                        â€¢ ç»´æŒæ—¶é’ŸåŒæ­¥<br>
                        <br>
                        <strong>ç¡¬ä»¶å®ç°ï¼š</strong><br>
                        â€¢ Encoding State Machine<br>
                        â€¢ IDLE Generator FSM<br>
                        â€¢ FIFO Fill Controller
                    </div>
                    <div class="code-block">
                        ä¼ªä»£ç ï¼š<br>
                        if (mac_tx_data_valid) {<br>
                        &nbsp;&nbsp;output_block = encode_64b66b(mac_data);<br>
                        } else {<br>
                        &nbsp;&nbsp;output_block = <span class="emphasis">IDLE_BLOCK</span>; // ç”ŸæˆIDLEï¼<br>
                        }<br>
                        <br>
                        è¾“å‡ºç¤ºä¾‹ï¼š<br>
                        [Data Block][Data Block]<span class="emphasis">[IDLE][IDLE]</span>[Data Block]...
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box">
                    <div class="module-name">AMæ’å…¥å™¨ <span class="layer-badge layer-l1">Layer 1 - PCS</span></div>
                    <div class="module-desc">
                        â€¢ <span class="emphasis">åœ¨Blockæµä¸­æ’å…¥AMç </span><br>
                        â€¢ æ¯16,384ä¸ªBlockæ’å…¥ä¸€æ¬¡<br>
                        â€¢ âœ… <strong>å¯ä»¥æ’å…¥åˆ°IDLE Blockä¹‹é—´</strong><br>
                        â€¢ âœ… <strong>å¯ä»¥æ’å…¥åˆ°Data Blockä¹‹é—´</strong><br>
                        â€¢ AMç ä¸IDLE/Dataä¸€è§†åŒä»
                    </div>
                    <div class="code-block">
                        Blockæµï¼š<br>
                        [Data][IDLE]<span class="emphasis">[AM]</span>[IDLE][Data][IDLE]<span class="emphasis">[AM]</span>...<br>
                        <br>
                        å…³é”®ï¼šAMè®¡æ•°ä¸åŒºåˆ†IDLEè¿˜æ˜¯Dataï¼
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box">
                    <div class="module-name">FECç¼–ç å™¨ <span class="layer-badge layer-l1">Layer 1 - FEC</span></div>
                    <div class="module-desc">
                        â€¢ RS(544,514) å‰å‘çº é”™ç¼–ç <br>
                        â€¢ âœ… <strong>IDLEå‚ä¸FECç¼–ç </strong><br>
                        â€¢ âœ… <strong>AMç ä¸å‚ä¸FECç¼–ç ï¼ˆé€ä¼ ï¼‰</strong><br>
                        â€¢ æ·»åŠ 30ä¸ªå†—ä½™ç¬¦å·
                    </div>
                    <div class="code-block">
                        FECè¾“å…¥ï¼š<br>
                        [Data][<span class="emphasis">IDLE</span>][AM][<span class="emphasis">IDLE</span>][Data]...<br>
                        <br>
                        FECç¼–ç ï¼š<br>
                        [Data+Parity][<span class="emphasis">IDLE+Parity</span>][AM(é€ä¼ )][<span class="emphasis">IDLE+Parity</span>]...<br>
                        <br>
                        âš ï¸ æ³¨æ„ï¼šIDLEè¢«å½“ä½œæ™®é€šæ•°æ®ç¼–ç ï¼
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box">
                    <div class="module-name">SerDes TX <span class="layer-badge layer-phy">PHY</span></div>
                    <div class="module-desc">
                        â€¢ å¹¶ä¸²è½¬æ¢<br>
                        â€¢ æ‰€æœ‰Blockï¼ˆData/IDLE/AMï¼‰ä»¥ç›¸åŒæ–¹å¼å¤„ç†<br>
                        â€¢ è°ƒåˆ¶åˆ°ç‰©ç†ä¿¡å·ä¸Š<br>
                        â€¢ IDLEçš„bitå’ŒDataçš„bitæ— åŒºåˆ«
                    </div>
                </div>
            </div>

            <div class="wave-animation">
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
            </div>
            <div style="text-align: center; font-size: 20px; color: #ffd700; margin: 20px 0;">
                ğŸ“¡ å…‰çº¤/é“œç¼†ä¼ è¾“ï¼ˆæ‰€æœ‰ä¿¡å·è¿ç»­ä¼ è¾“ï¼‰ğŸ“¡
            </div>
            <div class="wave-animation">
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
            </div>

            <div class="flow-section">
                <div class="section-title">ğŸ“¥ æ¥æ”¶æ–¹å‘ï¼ˆRXï¼‰</div>

                <div class="module-box">
                    <div class="module-name">SerDes RX <span class="layer-badge layer-phy">PHY</span></div>
                    <div class="module-desc">
                        â€¢ CDRæ¢å¤æ—¶é’Ÿï¼ˆä»æ‰€æœ‰bitï¼ŒåŒ…æ‹¬IDLEçš„bitï¼‰<br>
                        â€¢ ä¸²å¹¶è½¬æ¢<br>
                        â€¢ IDLEã€Dataã€AMä¸€è§†åŒä»
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box">
                    <div class="module-name">FECè§£ç å™¨ <span class="layer-badge layer-l1">Layer 1 - FEC</span></div>
                    <div class="module-desc">
                        â€¢ RS(544,514)çº é”™<br>
                        â€¢ âœ… <strong>è§£ç IDLEï¼ˆæ¢å¤åŸå§‹IDLEï¼‰</strong><br>
                        â€¢ âœ… <strong>é€ä¼ AMç </strong><br>
                        â€¢ ç§»é™¤30ä¸ªå†—ä½™ç¬¦å·
                    </div>
                    <div class="code-block">
                        FECè¾“å‡ºï¼š<br>
                        [Data][<span class="emphasis">IDLE</span>][AM][<span class="emphasis">IDLE</span>][Data]...<br>
                        <br>
                        IDLEè¢«è¿˜åŸä¸ºåŸå§‹pattern
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box">
                    <div class="module-name">AMæ£€æµ‹ä¸Deskew <span class="layer-badge layer-l1">Layer 1 - PMA</span></div>
                    <div class="module-desc">
                        â€¢ æ£€æµ‹AMç <br>
                        â€¢ å¯¹é½å¤šLane<br>
                        â€¢ âš ï¸ IDLE Blockå¯èƒ½åœ¨æ­¤è¢«è°ƒæ•´ï¼ˆElastic Bufferï¼‰
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box highlight-idle">
                    <div class="module-name">ğŸ¯ PCSè§£ç å±‚ï¼ˆIDLEå¤„ç†ç‚¹ï¼ï¼‰<span class="layer-badge layer-l1">Layer 1 - PCS</span></div>
                    <div class="module-desc">
                        <strong>â­ IDLEæŠ¥æ–‡åœ¨è¿™é‡Œè¢«å¤„ç†ï¼â­</strong><br>
                        <br>
                        <strong>åŠŸèƒ½ï¼š</strong><br>
                        â€¢ 64B/66Bè§£ç <br>
                        â€¢ <span class="emphasis">è¯†åˆ«IDLEå­—ç¬¦</span><br>
                        â€¢ <span class="emphasis">ä¸¢å¼ƒIDLEï¼ˆä¸ä¸Šä¼ MACï¼‰</span><br>
                        â€¢ <span class="emphasis">æˆ–åŠ¨æ€åˆ é™¤/æ·»åŠ IDLEï¼ˆElastic Bufferï¼‰</span><br>
                        â€¢ æå–æ•°æ®å¸§<br>
                        <br>
                        <strong>Elastic BufferåŠŸèƒ½ï¼š</strong><br>
                        â€¢ æ—¶é’ŸåŸŸè½¬æ¢ï¼ˆRXæ—¶é’Ÿ â†’ æœ¬åœ°æ—¶é’Ÿï¼‰<br>
                        â€¢ é€šè¿‡æ·»åŠ /åˆ é™¤IDLEè°ƒæ•´FIFOæ·±åº¦<br>
                        â€¢ è¡¥å¿é¢‘ç‡å·®å¼‚
                    </div>
                    <div class="code-block">
                        è§£ç é€»è¾‘ï¼š<br>
                        decoded_block = decode_64b66b(input_block);<br>
                        if (decoded_block == <span class="emphasis">IDLE_CHAR</span>) {<br>
                        &nbsp;&nbsp;// ä¸¢å¼ƒæˆ–ç”¨äºElastic Bufferè°ƒæ•´<br>
                        &nbsp;&nbsp;discard(); // ä¸ä¸Šä¼ åˆ°MAC<br>
                        } else {<br>
                        &nbsp;&nbsp;send_to_mac(decoded_block);<br>
                        }<br>
                        <br>
                        è¾“å‡ºï¼šä»…æ•°æ®å¸§<br>
                        [Data Frame 1][Data Frame 2]...<br>
                        IDLEè¢«ç§»é™¤ï¼
                    </div>
                </div>

                <div class="arrow-down">â†“</div>

                <div class="module-box">
                    <div class="module-name">MACå±‚ <span class="layer-badge layer-l2">Layer 2</span></div>
                    <div class="module-desc">
                        â€¢ æ¥æ”¶ä»¥å¤ªç½‘å¸§<br>
                        â€¢ CRCæ ¡éªŒ<br>
                        â€¢ âš ï¸ MACå±‚çœ‹ä¸åˆ°IDLEï¼ˆå·²è¢«PCSç§»é™¤ï¼‰
                    </div>
                    <div class="code-block">
                        MACæ¥æ”¶åˆ°çš„ï¼š<br>
                        è¿ç»­çš„ä»¥å¤ªç½‘å¸§ï¼ˆæ— IDLEï¼‰<br>
                        [Frame 1][Frame 2][Frame 3]...
                    </div>
                </div>
            </div>
        </div>

        <!-- æ ‡ç­¾é¡µå†…å®¹ -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('format')">IDLEæ ¼å¼</button>
            <button class="tab-btn" onclick="switchTab('comparison')">ä¸å…¶ä»–Blockå¯¹æ¯”</button>
            <button class="tab-btn" onclick="switchTab('elastic')">Elastic Buffer</button>
            <button class="tab-btn" onclick="switchTab('timing')">æ—¶åºå›¾</button>
        </div>

        <!-- IDLEæ ¼å¼ -->
        <div id="format" class="tab-content active">
            <div class="chip-diagram">
                <h2 style="color: #ffd700; margin-bottom: 20px;">ğŸ“ IDLEæŠ¥æ–‡æ ¼å¼è¯¦è§£</h2>
                
                <div class="grid-layout">
                    <div class="info-card">
                        <h3>64B/66Bç¼–ç çš„IDLE</h3>
                        <div class="code-block">
                            66-bit Blockç»“æ„ï¼š<br>
                            <br>
                            Sync Header (2 bits): 01 (Control Block)<br>
                            <br>
                            Payload (64 bits):<br>
                            Block Type: 0x1E (IDLEæ ‡è®°)<br>
                            + 7ä¸ª IDLE å­—ç¬¦<br>
                            <br>
                            è¯¦ç»†æ ¼å¼ï¼š<br>
                            â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>
                            â”‚ 01 â”‚ 0x1E + 7Ã—0x00 (IDLE) â”‚<br>
                            â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>
                            2bit     64 bits<br>
                            <br>
                            æˆ–ï¼š<br>
                            â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>
                            â”‚ 01 â”‚ 0x4B + 7Ã—0x07 (IDLE) â”‚<br>
                            â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>
                            (ä¸åŒå®ç°å¯èƒ½ä¸åŒ)
                        </div>
                    </div>

                    <div class="info-card">
                        <h3>ä¸8B/10Bç¼–ç çš„IDLEå¯¹æ¯”</h3>
                        <div class="code-block">
                            8B/10B (10Gä»¥å¤ªç½‘):<br>
                            <br>
                            IDLEå­—ç¬¦ï¼šK28.5 (0xBC or 0x3C)<br>
                            10-bitç¼–ç ï¼š001111 1011 æˆ–<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;110000 0100<br>
                            <br>
                            ç‰¹ç‚¹ï¼š<br>
                            â€¢ ä¸“ç”¨æ§åˆ¶å­—ç¬¦<br>
                            â€¢ ä¿æŒDCå¹³è¡¡<br>
                            â€¢ æ˜“äºè¯†åˆ«<br>
                            <br>
                            64B/66B vs 8B/10B:<br>
                            â€¢ 64B/66Bæ•ˆç‡æ›´é«˜ï¼ˆ3%å¼€é”€ vs 25%ï¼‰<br>
                            â€¢ 64B/66Bä½¿ç”¨Block TypeåŒºåˆ†<br>
                            â€¢ 8B/10Bä½¿ç”¨K-code<br>
                        </div>
                    </div>
                </div>

                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>Blockç±»å‹</th>
                            <th>Sync Header</th>
                            <th>Block Type</th>
                            <th>Payload</th>
                            <th>ç”¨é€”</th>
                        </tr>
                        <tr>
                            <td>Data Block</td>
                            <td>10</td>
                            <td>-</td>
                            <td>64 bits ç”¨æˆ·æ•°æ®</td>
                            <td>ä¼ è¾“ä»¥å¤ªç½‘å¸§æ•°æ®</td>
                        </tr>
                        <tr style="background: rgba(240, 147, 251, 0.3);">
                            <td><strong>IDLE Block</strong></td>
                            <td><strong>01</strong></td>
                            <td><strong>0x1E</strong></td>
                            <td><strong>7Ã—IDLEå­—ç¬¦</strong></td>
                            <td><strong>å¡«å……å¸§é—´éš™ï¼Œä¿æŒåŒæ­¥</strong></td>
                        </tr>
                        <tr>
                            <td>Start Block</td>
                            <td>01</td>
                            <td>0x78</td>
                            <td>SFD + èµ·å§‹æ•°æ®</td>
                            <td>å¸§èµ·å§‹æ ‡è®°</td>
                        </tr>
                        <tr>
                            <td>Terminate Block</td>
                            <td>01</td>
                            <td>0x87~0xFF</td>
                            <td>å¸§å°¾ + IDLE</td>
                            <td>å¸§ç»“æŸæ ‡è®°</td>
                        </tr>
                        <tr>
                            <td>AM Block</td>
                            <td>01</td>
                            <td>0x90_76_47_C5</td>
                            <td>Laneæ ‡è®°</td>
                            <td>Laneå¯¹é½</td>
                        </tr>
                    </table>
                </div>

                <div class="info-card" style="margin-top: 20px;">
                    <h3>IDLE Blockç¤ºä¾‹ï¼ˆåå…­è¿›åˆ¶ï¼‰</h3>
                    <div class="code-block">
                        å®Œæ•´66-bit IDLE Block (äºŒè¿›åˆ¶):<br>
                        01 0001_1110 0000_0000 0000_0000 0000_0000 0000_0000 0000_0000 0000_0000 0000_0000<br>
                        â†‘  â†‘-Block Type-â†‘ â†‘--------------7ä¸ªIDLEå­—ç¬¦(0x00)---------------â†‘<br>
                        Sync<br>
                        <br>
                        å®é™…ä¼ è¾“æ—¶ï¼ˆä¸²è¡Œï¼‰ï¼š<br>
                        ä»LSBå¼€å§‹å‘é€ï¼Œæ¯ä¸ªbité—´éš”38.76ps (å¯¹äº25Gbps)<br>
                        <br>
                        åœ¨å…‰çº¤ä¸Šï¼š<br>
                        è¢«è°ƒåˆ¶ä¸ºå…‰å¼ºåº¦å˜åŒ–ï¼ˆNRZï¼‰æˆ–4ä¸ªç”µå¹³ï¼ˆPAM4ï¼‰
                    </div>
                </div>
            </div>
        </div>

        <!-- å¯¹æ¯” -->
        <div id="comparison" class="tab-content">
            <div class="chip-diagram">
                <h2 style="color: #ffd700; margin-bottom: 20px;">âš–ï¸ IDLEä¸Dataã€AMçš„å¯¹æ¯”</h2>
                
                <div class="table-wrapper">
                    <table>
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>Data Block</th>
                            <th>IDLE Block</th>
                            <th>AM Block</th>
                        </tr>
                        <tr>
                            <td><strong>ç”Ÿæˆä½ç½®</strong></td>
                            <td>MACå±‚ï¼ˆå°è£…æ•°æ®ï¼‰</td>
                            <td><span class="emphasis">PCSå±‚ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰</span></td>
                            <td>PCSå±‚ï¼ˆå›ºå®šå‘¨æœŸæ’å…¥ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>Sync Header</strong></td>
                            <td>10</td>
                            <td>01</td>
                            <td>01</td>
                        </tr>
                        <tr>
                            <td><strong>å†…å®¹</strong></td>
                            <td>ç”¨æˆ·æ•°æ®</td>
                            <td>å›ºå®šIDLEå­—ç¬¦</td>
                            <td>å›ºå®šAM pattern</td>
                        </tr>
                        <tr>
                            <td><strong>64B/66Bç¼–ç </strong></td>
                            <td>âœ… å‚ä¸</td>
                            <td>âœ… å‚ä¸</td>
                            <td>âœ… å‚ä¸</td>
                        </tr>
                        <tr>
                            <td><strong>AMæ’å…¥</strong></td>
                            <td>âœ… å¯åœ¨Dataé—´æ’å…¥AM</td>
                            <td>âœ… å¯åœ¨IDLEé—´æ’å…¥AM</td>
                            <td>- (AMè‡ªå·±)</td>
                        </tr>
                        <tr>
                            <td><strong>FECç¼–ç </strong></td>
                            <td>âœ… å‚ä¸</td>
                            <td>âœ… å‚ä¸ï¼ˆè¢«å½“ä½œæ•°æ®ï¼‰</td>
                            <td>âŒ ä¸å‚ä¸ï¼ˆé€ä¼ ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>SerDesä¼ è¾“</strong></td>
                            <td>âœ… æ­£å¸¸ä¼ è¾“</td>
                            <td>âœ… æ­£å¸¸ä¼ è¾“</td>
                            <td>âœ… æ­£å¸¸ä¼ è¾“</td>
                        </tr>
                        <tr>
                            <td><strong>CDRæ—¶é’Ÿæ¢å¤</strong></td>
                            <td>âœ… æä¾›bit transition</td>
                            <td>âœ… æä¾›bit transition</td>
                            <td>âœ… æä¾›bit transition</td>
                        </tr>
                        <tr>
                            <td><strong>RXç«¯å¤„ç†</strong></td>
                            <td>ä¸Šä¼ åˆ°MAC</td>
                            <td><span class="emphasis">ä¸¢å¼ƒï¼ˆä¸ä¸Šä¼ MACï¼‰</span></td>
                            <td>ç”¨äºå¯¹é½åä¸¢å¼ƒ</td>
                        </tr>
                        <tr>
                            <td><strong>Elastic Buffer</strong></td>
                            <td>âŒ ä¸å¯åˆ é™¤/æ·»åŠ </td>
                            <td>âœ… <span class="emphasis">å¯åŠ¨æ€åˆ é™¤/æ·»åŠ </span></td>
                            <td>âŒ ä¸å¯åˆ é™¤/æ·»åŠ </td>
                        </tr>
                        <tr>
                            <td><strong>ä¸Šå±‚å¯è§æ€§</strong></td>
                            <td>âœ… åº”ç”¨å±‚å¯è§</td>
                            <td>âŒ ä¸Šå±‚ä¸å¯è§</td>
                            <td>âŒ ä¸Šå±‚ä¸å¯è§</td>
                        </tr>
                        <tr>
                            <td><strong>ä¸»è¦ä½œç”¨</strong></td>
                            <td>æ‰¿è½½ç”¨æˆ·æ•°æ®</td>
                            <td>ä¿æŒé“¾è·¯åŒæ­¥ã€æ—¶é’Ÿè¿ç»­ã€å¡«å……é—´éš™</td>
                            <td>å¤šLaneå¯¹é½</td>
                        </tr>
                    </table>
                </div>

                <div class="grid-layout" style="margin-top: 20px;">
                    <div class="info-card">
                        <h3>ğŸ”‘ å…³é”®å·®å¼‚</h3>
                        <ul style="line-height: 2;">
                            <li><strong>Dataï¼š</strong>æºå¸¦ä¿¡æ¯ï¼Œä¸å¯ä¸¢å¼ƒ</li>
                            <li><strong>IDLEï¼š</strong>å¡«å……ä½œç”¨ï¼Œå¯åŠ¨æ€è°ƒæ•´</li>
                            <li><strong>AMï¼š</strong>å¯¹é½æ ‡è®°ï¼Œä½ç½®å›ºå®š</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>âš ï¸ å…±åŒç‚¹</h3>
                        <ul style="line-height: 2;">
                            <li>æ‰€æœ‰éƒ½ç»è¿‡64B/66Bç¼–ç </li>
                            <li>æ‰€æœ‰éƒ½ä»¥ç›¸åŒbit rateä¼ è¾“</li>
                            <li>æ‰€æœ‰éƒ½å‚ä¸CDRæ—¶é’Ÿæ¢å¤</li>
                            <li>ç‰©ç†å±‚æ— åŒºåˆ«ï¼ˆSerDesçœ‹æ¥ï¼‰</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Elastic Buffer -->
        <div id="elastic" class="tab-content">
            <div class="chip-diagram">
                <h2 style="color: #ffd700; margin-bottom: 20px;">ğŸ”„ Elastic Bufferä¸IDLEçš„å…³ç³»</h2>
                
                <div class="info-card">
                    <h3>ä»€ä¹ˆæ˜¯Elastic Bufferï¼Ÿ</h3>
                    <p style="line-height: 1.8;">
                        Elastic Bufferæ˜¯æ¥æ”¶ç«¯ç”¨äºè¡¥å¿å‘é€ç«¯å’Œæ¥æ”¶ç«¯æ—¶é’Ÿé¢‘ç‡å·®å¼‚çš„æœºåˆ¶ã€‚
                        ç”±äºä¸åŒè®¾å¤‡çš„æ—¶é’Ÿæºä¸å®Œå…¨ç›¸åŒï¼Œå³ä½¿éƒ½æ˜¯"156.25 MHz"ï¼Œå®é™…ä¹Ÿå¯èƒ½æœ‰Â±100ppmçš„å·®å¼‚ã€‚
                        å¦‚æœä¸è¡¥å¿ï¼ŒFIFOä¼šé€æ¸æº¢å‡ºæˆ–ä¸‹æº¢ã€‚
                    </p>
                </div>

                <div class="code-block">
                    é—®é¢˜åœºæ™¯ï¼š<br>
                    <br>
                    å‘é€ç«¯æ—¶é’Ÿï¼š156.250000 MHz (ç²¾ç¡®)<br>
                    æ¥æ”¶ç«¯æ—¶é’Ÿï¼š156.250100 MHz (å¿«100ppm)<br>
                    <br>
                    å·®å¼‚ï¼š100 ppm = 100 bits/ç§’ (å¯¹äº1Gbps)<br>
                    <br>
                    1ç§’åï¼šæ¥æ”¶ç«¯å¤š"å¤„ç†"äº†100 bits<br>
                    â†’ RX FIFOä¼šé€æ¸ç©º<br>
                    â†’ éœ€è¦"æ·»åŠ "æ•°æ®æ¥å¡«å……<br>
                    â†’ æ·»åŠ ä»€ä¹ˆï¼Ÿ<span class="emphasis">IDLEï¼</span><br>
                    <br>
                    åä¹‹ï¼Œå¦‚æœRXæ—¶é’Ÿæ…¢ï¼š<br>
                    â†’ RX FIFOä¼šé€æ¸æ»¡<br>
                    â†’ éœ€è¦"åˆ é™¤"æ•°æ®æ¥é¿å…æº¢å‡º<br>
                    â†’ åˆ é™¤ä»€ä¹ˆï¼Ÿ<span class="emphasis">IDLEï¼</span>
                </div>

                <div class="grid-layout">
                    <div class="info-card">
                        <h3>æ·»åŠ IDLEï¼ˆSkip Insertionï¼‰</h3>
                        <div class="code-block">
                            åœºæ™¯ï¼šRXæ—¶é’Ÿå¿«äºTXæ—¶é’Ÿ<br>
                            <br>
                            åŸå§‹æµï¼š<br>
                            [Data][Data][IDLE][Data]<br>
                            <br>
                            FIFOå°†è¦underrunï¼<br>
                            â†“<br>
                            æ’å…¥é¢å¤–IDLEï¼š<br>
                            [Data][Data][IDLE]<span class="emphasis">[IDLE]</span>[Data]<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â†‘æ’å…¥<br>
                            <br>
                            ç»“æœï¼š<br>
                            â€¢ FIFOæ·±åº¦å¢åŠ <br>
                            â€¢ ä¸Šå±‚çœ‹ä¸åˆ°ï¼ˆIDLEè¢«ä¸¢å¼ƒï¼‰<br>
                            â€¢ æ•°æ®å®Œæ•´æ€§ä¿æŒ
                        </div>
                    </div>

                    <div class="info-card">
                        <h3>åˆ é™¤IDLEï¼ˆSkip Deletionï¼‰</h3>
                        <div class="code-block">
                            åœºæ™¯ï¼šRXæ—¶é’Ÿæ…¢äºTXæ—¶é’Ÿ<br>
                            <br>
                            åŸå§‹æµï¼š<br>
                            [Data][IDLE][IDLE][Data]<br>
                            <br>
                            FIFOå°†è¦overrunï¼<br>
                            â†“<br>
                            åˆ é™¤ä¸€ä¸ªIDLEï¼š<br>
                            [Data][IDLE]<span class="emphasis">âŒ</span>[Data]<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â†‘åˆ é™¤<br>
                            <br>
                            ç»“æœï¼š<br>
                            â€¢ FIFOæ·±åº¦å‡å°‘<br>
                            â€¢ ä¸Šå±‚çœ‹ä¸åˆ°ï¼ˆIDLEæœ¬æ¥å°±ä¸¢å¼ƒï¼‰<br>
                            â€¢ æ•°æ®å®Œæ•´æ€§ä¿æŒ
                        </div>
                    </div>
                </div>

                <div class="info-card" style="margin-top: 20px;">
                    <h3>âš ï¸ é‡è¦é™åˆ¶</h3>
                    <ul style="line-height: 2;">
                        <li><strong>åªèƒ½æ“ä½œIDLEï¼š</strong>ä¸èƒ½åˆ é™¤/æ·»åŠ Dataæˆ–AMï¼</li>
                        <li><strong>åœ¨å®‰å…¨ä½ç½®æ“ä½œï¼š</strong>åªåœ¨å¸§é—´éš™çš„IDLEåºåˆ—ä¸­</li>
                        <li><strong>ä¸èƒ½ç ´åå¸§ï¼š</strong>å¸§å†…çš„IDLEï¼ˆå¦‚æœæœ‰ï¼‰ä¸èƒ½åˆ é™¤</li>
                        <li><strong>ä¸å½±å“æ—¶é’Ÿï¼š</strong>æ“ä½œå‘ç”Ÿåœ¨æ•°å­—é€»è¾‘åŸŸï¼Œä¸å½±å“CDR</li>
                    </ul>
                </div>

                <div class="code-block" style="margin-top: 20px;">
                    Elastic Bufferå®ç°ï¼ˆä¼ªä»£ç ï¼‰ï¼š<br>
                    <br>
                    // FIFOç›‘æ§<br>
                    if (fifo_level < LOW_THRESHOLD) {<br>
                    &nbsp;&nbsp;// FIFOå¿«ç©ºäº†ï¼Œéœ€è¦æ·»åŠ IDLE<br>
                    &nbsp;&nbsp;if (current_block == IDLE && safe_to_insert) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;insert_extra_idle();<br>
                    &nbsp;&nbsp;}<br>
                    } else if (fifo_level > HIGH_THRESHOLD) {<br>
                    &nbsp;&nbsp;// FIFOå¿«æ»¡äº†ï¼Œéœ€è¦åˆ é™¤IDLE<br>
                    &nbsp;&nbsp;if (current_block == IDLE && safe_to_delete) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;skip_current_idle();<br>
                    &nbsp;&nbsp;}<br>
                    }<br>
                    <br>
                    å…³é”®ï¼šæ“ä½œå¯¹è±¡å¿…é¡»æ˜¯IDLEï¼
                </div>
            </div>
        </div>

        <!-- æ—¶åºå›¾ -->
        <div id="timing" class="tab-content">
            <div class="chip-diagram">
                <h2 style="color: #ffd700; margin-bottom: 20px;">â±ï¸ IDLEåœ¨ä¼ è¾“é“¾è·¯ä¸­çš„æ—¶åº</h2>
                
                <div class="code-block" style="font-size: 11px;">
                    æ—¶é—´çº¿ï¼ˆTX â†’ RXï¼‰ï¼š
                    
å‘é€ç«¯ï¼š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
æ—¶é—´ â†’

MACå±‚ï¼š
[Frame 1        ] ... IFG(96ns) ... [Frame 2        ]
                      â†‘
                   å¸§é—´éš™

PCSå±‚ï¼ˆç”ŸæˆIDLEï¼‰ï¼š
[Frame 1 encoded]<span class="emphasis">[IDLE][IDLE][IDLE][IDLE][IDLE][IDLE]</span>[Frame 2 encoded]
                  â†‘-------------------------â†‘
                  ç”¨IDLEå¡«å……IFGï¼ˆ12ä¸ªIDLE Blockï¼‰

AMæ’å…¥ï¼š
[Frame][IDLE][IDLE]<span class="emphasis">[AM]</span>[IDLE][IDLE][IDLE][Frame]
                    â†‘
                æ¯16384 Blockæ’å…¥ä¸€æ¬¡AM

FECç¼–ç ï¼š
[Frame+P][IDLE+P][IDLE+P]<span class="emphasis">[AM]</span>[IDLE+P][Frame+P]
         â†‘-FEC Parity-â†‘  â†‘é€ä¼ â†‘ â†‘-FEC Parity-â†‘
         IDLEå‚ä¸ç¼–ç       AMä¸å‚ä¸

SerDes TXï¼š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
æ‰€æœ‰bitä»¥38.76psé—´éš”è¿ç»­å‘é€
Frame bits... IDLE bits... AM bits...
ï¼ˆç‰©ç†å±‚æ— æ³•åŒºåˆ†ï¼‰

ä¼ è¾“ï¼šå…‰çº¤
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
å…‰ä¿¡å·è¿ç»­ä¼ è¾“ï¼Œæ‰€æœ‰bitä»¥ç›¸åŒæ–¹å¼è°ƒåˆ¶

æ¥æ”¶ç«¯ï¼š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SerDes RXï¼š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CDRä»æ‰€æœ‰bitï¼ˆåŒ…æ‹¬IDLEçš„bitï¼‰æ¢å¤æ—¶é’Ÿ
â†’ SyncEæå–ç‚¹ï¼ˆæ—¶é’Ÿè´¨é‡ï¼šåŒ…å«IDLEçš„è´¡çŒ®ï¼‰

FECè§£ç ï¼š
[Frame][IDLE][IDLE]<span class="emphasis">[AM]</span>[IDLE][IDLE][Frame]
        â†‘çº é”™åâ†‘    â†‘é€ä¼ â†‘ â†‘çº é”™åâ†‘
        è¿˜åŸIDLE

AMæ£€æµ‹ & Deskewï¼š
æ£€æµ‹AMä½ç½® â†’ å¯¹é½Lane â†’ FIFOç¼“å†²
<span class="emphasis">åœ¨æ­¤å¯èƒ½æ’å…¥/åˆ é™¤IDLE (Elastic Buffer)</span>

PCSè§£ç ï¼š
[Frame decoded]<span class="emphasis">âŒâŒâŒâŒâŒ</span>[Frame decoded]
                â†‘ä¸¢å¼ƒIDLEâ†‘
                
MACå±‚æ¥æ”¶ï¼š
[Frame 1] [Frame 2]
ï¼ˆçœ‹ä¸åˆ°IDLEï¼Œå·²è¢«ç§»é™¤ï¼‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                </div>

                <div class="info-card" style="margin-top: 20px;">
                    <h3>ğŸ“Š å…³é”®æ—¶åºå‚æ•°</h3>
                    <div class="table-wrapper">
                        <table>
                            <tr>
                                <th>å‚æ•°</th>
                                <th>æ•°å€¼</th>
                                <th>è¯´æ˜</th>
                            </tr>
                            <tr>
                                <td>å¸§é—´éš™ï¼ˆIFGï¼‰</td>
                                <td>96 ns (12 bytes)</td>
                                <td>ä¸¤å¸§ä¹‹é—´çš„æœ€å°æ—¶é—´</td>
                            </tr>
                            <tr>
                                <td>IDLE Blockæ—¶é—´</td>
                                <td>2.56 ns (@ 25Gbps)</td>
                                <td>ä¼ è¾“ä¸€ä¸ªIDLE Blockçš„æ—¶é—´</td>
                            </tr>
                            <tr>
                                <td>IDLEåœ¨IFGä¸­çš„æ•°é‡</td>
                                <td>~12ä¸ªBlock</td>
                                <td>96ns / 2.56ns â‰ˆ 37.5 bytes</td>
                            </tr>
                            <tr>
                                <td>AMæ’å…¥é—´éš”</td>
                                <td>200 Î¼s</td>
                                <td>æ¯16384 Block</td>
                            </tr>
                            <tr>
                                <td>Elastic Bufferè°ƒæ•´é¢‘ç‡</td>
                                <td>~1æ¬¡/ç§’</td>
                                <td>å–å†³äºæ—¶é’Ÿé¢‘å·®</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰å†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeçŠ¶æ€
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„å†…å®¹
            document.getElementById(tabName).classList.add('active');
            
            // æ¿€æ´»å¯¹åº”æŒ‰é’®
            event.target.classList.add('active');
        }
    </script>
</body>
</html>